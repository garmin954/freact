{"version":3,"sources":["store/reducer/remarks.js","store/reducer/user.js","store/reducer/index.js","store/index.js","utils/request.js","store/actions/user.js","store/actionType.js","pages/item.js","pages/index.js","pages/authRoute.js","utils/lazy.js","pages/router.js","App.js","reportWebVitals.js","index.js"],"names":["remarksState","remarks","value","check","checkCount","allCheck","state","action","type","ADD_REMARKS","push","DEL_REMARKS","filter","item","index","DEL_CHECK_REMARKS","length","CHECK_REMARKS_ITEM","CHECK_REMARKS_ALL","map","userState","finalReducer","combineReducers","user","LOGIN_USER","GET_USER_INFO","data","login_state","IS_USER_LOGIN","Cookies","get","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","instance","axios","create","baseURL","headers","timeout","interceptors","request","use","config","token","Authorization","response","console","log","error","status","router","HashRouter","remove","dispatch","loginState","setTimeout","history","replace","pathname","Promise","reject","url","method","params","resolve","dataName","toUpperCase","then","catch","login","a","code","msg","set","expires","getUserInfo","Item","this","props","id","className","onClick","onDelete","Component","propsTypes","propTypes","number","isRequired","string","func","defaultProps","AuthRoute","unsubscribe","subscribe","getLoginState","getState","setState","to","loader","lazy","AsyncComponent","MainLayout","fallback","path","exact","render","component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d473fcd6.chunk.js","sourcesContent":["//包含n个reducer函数的模块\r\nimport {ADD_REMARKS, CHECK_REMARKS_ALL, CHECK_REMARKS_ITEM, DEL_REMARKS, DEL_CHECK_REMARKS} from '../actionType'\r\nconst remarksState = {\r\n  remarks:[{\r\n    value: 'Garmin',\r\n    check: false,\r\n  }],\r\n  checkCount: 0,\r\n  allCheck: false\r\n}\r\n\r\nfunction remarks(state=remarksState,action){ //形参默认值\r\n  let {remarks, allCheck, checkCount} = state;\r\n  switch(action.type){\r\n    // 添加\r\n    case ADD_REMARKS:\r\n      state.remarks.push({\r\n        value: action.value,\r\n        check: false,\r\n      })\r\n      return state\r\n    // 删除单条记录\r\n    case DEL_REMARKS:\r\n      state.remarks = state.remarks.filter((item, index)=> {\r\n        if (index !== action.value){\r\n          return  item;\r\n        }else{\r\n          return false;\r\n        }\r\n      })\r\n      return state\r\n    // 多选删除item\r\n    case DEL_CHECK_REMARKS:\r\n      remarks = remarks.filter((item, index)=> {\r\n        return !item.check;\r\n      })\r\n      checkCount = remarks.length;\r\n      allCheck = false;\r\n      return {\r\n        remarks,\r\n        checkCount,\r\n        allCheck\r\n      }\r\n    // 选中单挑记录\r\n    case CHECK_REMARKS_ITEM:\r\n      remarks[action.value].check = !remarks[action.value].check;\r\n      checkCount = remarks.filter((item) => {\r\n        return item.check;\r\n      }).length\r\n\r\n      if (checkCount >= remarks.length){\r\n        allCheck = true;\r\n      }else{\r\n        allCheck = false;\r\n      }\r\n\r\n      return {\r\n        remarks,\r\n        checkCount,\r\n        allCheck\r\n      }\r\n    // 全选\r\n    case CHECK_REMARKS_ALL:\r\n      let check;\r\n      if (!allCheck){\r\n        allCheck = true;\r\n        checkCount = remarks.length\r\n        check = true;\r\n      } else{\r\n        check = false;\r\n        allCheck = false;\r\n        checkCount = 0;\r\n      }\r\n      remarks = remarks.map(item=>{\r\n        item.check = check\r\n        return item;\r\n      })\r\n\r\n      return {\r\n        remarks,\r\n        checkCount,\r\n        allCheck\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\nexport default remarks;\r\n","import {LOGIN_USER, GET_USER_INFO, IS_USER_LOGIN} from '../actionType';\r\nimport Cookies from 'js-cookie';\r\nimport {combineReducers} from \"redux\";\r\nimport remarks from \"./remarks\";\r\nconst userState = {};\r\nfunction user(state=userState, action){\r\n  switch (action.type){\r\n    case LOGIN_USER:\r\n      return action.data;\r\n      break;\r\n\r\n    case GET_USER_INFO:\r\n      return action.data;\r\n      break;\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nfunction login_state(state = true, action){\r\n  switch (action.type){\r\n    case IS_USER_LOGIN:\r\n      if (Cookies.get('_token')){\r\n        return true;\r\n      }\r\n      return false;\r\n      break;\r\n    default:\r\n      return false;\r\n      break;\r\n  }\r\n}\r\nexport {\r\n  login_state,\r\n  user\r\n};\r\n","//包含n个reducer函数的模块\r\nimport {combineReducers} from 'redux'\r\nimport remarks from \"./remarks\";\r\nimport {  login_state, user } from \"./user\";\r\n\r\n\r\nexport const finalReducer = combineReducers({\r\n  remarks,\r\n  user,\r\n  login_state\r\n})\r\n","import {createStore, applyMiddleware, compose} from 'redux'\r\nimport {finalReducer} from './reducer/index'\r\nimport thunk from 'redux-thunk'\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' &&\r\n  window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n      // Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...\r\n    }) : compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(thunk),\r\n);\r\n\r\n//生成store对象\r\nconst store = createStore(finalReducer, enhancer);//内部会第一次调用reducer函数，得到初始state\r\n\r\nexport default store\r\n","import axios from 'axios';\r\nimport {useHistory, HashRouter} from 'react-router-dom'\r\nimport Cookies from 'js-cookie'\r\nimport store from \"../store\";\r\nimport {loginState} from \"../store/actions/user\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: '/api',\r\n  headers: {},\r\n  timeout: 3000,\r\n})\r\n\r\ninstance.interceptors.request.use((config)=>{\r\n  const token = Cookies.get('_token') || null;\r\n  if (token){\r\n    config.headers= {\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  }\r\n  return config;  //添加这一行\r\n})\r\nconst headers = {};\r\nconst request = (url='', method=\"GET\", params={}) => {\r\n  return new Promise((resolve, reject) => {\r\n    let dataName = 'data';\r\n    switch (method.toUpperCase()){\r\n      case \"REQUEST\":\r\n      case \"GET\":\r\n      case \"HEAD\":\r\n      case \"OPTIONS\":\r\n        dataName = 'params';\r\n        break;\r\n    }\r\n\r\n    instance({\r\n      headers,\r\n      url,\r\n      method,\r\n      [dataName]: params,\r\n    }).then(response=>{\r\n      const { status, data } = response;\r\n      switch (status){\r\n        case 200:\r\n          resolve(data)\r\n          break;\r\n        case 401:\r\n          resolve(data)\r\n          break;\r\n      }\r\n      resolve(data)\r\n      console.log(response);\r\n    }).catch(error=>{\r\n      reject(error);\r\n    })\r\n  })\r\n}\r\n\r\ninstance.interceptors.response.use((response) =>{\r\n  console.log(response);\r\n  // 对响应数据做点什么\r\n  return response;\r\n},(error)=>{\r\n  const { status } = error.response;\r\n  const router = new HashRouter({})\r\n  switch (status){\r\n    case 401:\r\n      Cookies.remove('_token')\r\n      store.dispatch(loginState())\r\n      setTimeout(()=>router.history.replace({ pathname: '/login' }), 0)\r\n      return Promise.reject('Permission denied')\r\n      break;\r\n  }\r\n})\r\n\r\n\r\nexport default request;\r\n","import {LOGIN_USER, GET_USER_INFO, IS_USER_LOGIN} from '../actionType'\r\nimport request from \"../../utils/request\";\r\nimport Cookies from 'js-cookie'\r\nimport store from \"../index\";\r\n\r\nexport const login = (params) =>{\r\n  return async () =>{\r\n    await request('/login', 'POST', params).then(response => {\r\n      const {code, msg, data: {token}} = response;\r\n      if (code === 0){\r\n        Cookies.set('_token', token, { expires: 1 });\r\n        store.dispatch({\r\n          type: LOGIN_USER,\r\n          data: response.data,\r\n        })\r\n      }\r\n      console.log(response);\r\n    })\r\n  }\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n  return async ()=>{\r\n    await request('/user', 'GET').then(response => {\r\n      const {code, msg, data} = response;\r\n      if (code === 0){\r\n        store.dispatch({\r\n          type: GET_USER_INFO,\r\n          data,\r\n        })\r\n      }\r\n      return false\r\n    })\r\n  }\r\n}\r\n\r\nexport const loginState = () =>({\r\n  type: IS_USER_LOGIN\r\n})\r\n","export const ADD_REMARKS = 'add_remarks';\r\nexport const DEL_REMARKS = 'del_remarks'\r\nexport const DEL_CHECK_REMARKS = 'del_check_remarks'\r\nexport const CHECK_REMARKS_ITEM = 'check_remarks_item'\r\nexport const CHECK_REMARKS_ALL = 'check_remarks_all'\r\n\r\nexport const LOGIN_USER = 'login_user';\r\nexport const GET_USER_INFO = 'get_user_info';\r\nexport const IS_USER_LOGIN = 'is_user_login';\r\n\r\n\r\n\r\n","import React,{Component} from 'react';\r\nimport propTypes from 'prop-types'\r\n\r\nexport default class Item extends Component{\r\n\r\n  // 约束props\r\n  static propsTypes = {\r\n    id: propTypes.number.isRequired,\r\n    value: propTypes.string.isRequired,\r\n    onDelete: propTypes.func.isRequired,\r\n  }\r\n\r\n  // 默认props\r\n  static defaultProps = {\r\n    id: 0,\r\n    value: 'empty'\r\n  }\r\n\r\n  render() {\r\n    const {props:{id, value}} = this;\r\n    return (\r\n      <li className='list-group-item'>\r\n        <div className='d-flex justify-content-between align-items-center'>\r\n          <span className='text-start'>{value}</span>\r\n          <button className='btn btn-danger btn-sm' onClick={()=> this.props.onDelete(id)}>del</button>\r\n        </div>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n","import React,{Component, createRef} from 'react';\r\nimport RemarksItem from \"./item\";\r\nexport default class Index extends Component{\r\n  // 构造函数\r\n  constructor(props) {\r\n    // 继承\r\n    super(props);\r\n    // 变量\r\n    this.state = {\r\n      remarks: [\r\n        'This is a note！',\r\n        'This is a note！2'\r\n      ]\r\n    }\r\n    // 添加一个ref 用来获取input元素\r\n    this.inputRef = createRef();\r\n  }\r\n\r\n  // 添加一条记录\r\n  handleAddRemarksItem(){\r\n    const {value} = this.inputRef.current;\r\n    if (!value){\r\n      alert('please input the value！');\r\n      return ;\r\n    }\r\n    const {remarks} = this.state;\r\n    remarks.push(value);\r\n    this.inputRef.current.value = '';\r\n    this.setState({\r\n      remarks\r\n    })\r\n  }\r\n\r\n  // 删除一条记录\r\n  handleDelItem(index){\r\n    const {remarks} = this.state;\r\n    if (remarks.length > 0){\r\n      if (remarks[index]){\r\n        remarks.splice(index, 1)\r\n      }\r\n      this.setState({\r\n        remarks\r\n      })\r\n    }\r\n  }\r\n\r\n  // 渲染视图方法，jsx语法\r\n  render() {\r\n    const {state:{remarks}, inputRef} = this;\r\n    return (\r\n      <div className='card'>\r\n        <div className=\"card-header\">\r\n          <div className=' input-group'>\r\n            <input type=\"text\" ref={inputRef} className='form-control' />\r\n            <button className='btn btn-success text-light' onClick={()=>this.handleAddRemarksItem()}>submit</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"card_body\">\r\n          {remarks.length>0 ? (\r\n            <ul className='list-group'>\r\n              {\r\n                remarks.map((item, index)=>(\r\n                  <RemarksItem\r\n                    key={index}\r\n                    value={item}\r\n                    id={index}\r\n                    onDelete={this.handleDelItem.bind(this)}\r\n                  />\r\n                ))\r\n              }\r\n            </ul>\r\n          ) : (\r\n            <div className='text-center'> No data </div>\r\n          )}\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {Redirect,Route} from \"react-router-dom\"\r\nimport Cookies from 'js-cookie';\r\nimport store from \"../store\";\r\nimport {loginState} from \"../store/actions/user\";\r\nexport default class AuthRoute extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      login_state: true\r\n    }\r\n    this.unsubscribe = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    store.subscribe(()=>{\r\n      this.getLoginState()\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe?.();\r\n  }\r\n\r\n  getLoginState(){\r\n    const {login_state} = store.getState()\r\n    this.setState = {login_state};\r\n  }\r\n\r\n  render() {\r\n    const token = Cookies.get('_token') || ''\r\n    return (\r\n      <div>\r\n        {/*<Route*/}\r\n        {/*  render = {props => {*/}\r\n        {/*    console.log('props=========>', this.state.login_state)*/}\r\n        {/*    return this.state.login_state ? (<Component {...this.props}/>) :(*/}\r\n        {/*      <Redirect to={{*/}\r\n        {/*        pathname:\"/login\",*/}\r\n        {/*        state:{from:props.location}*/}\r\n        {/*      }}/>*/}\r\n        {/*    )*/}\r\n        {/*  }*/}\r\n        {/*  }*/}\r\n        {/*>*/}\r\n\r\n        {/*</Route>*/}\r\n        {\r\n          token ? <Route {...this.props}></Route>:\r\n            <Redirect to=\"/login\"></Redirect>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { lazy } from 'react';\r\n\r\n/** 异步组件使用lazy()函数加载, 传递一个使用import()函数的Promise异步方法, 该方法最终返回import()函数的结果 */\r\nexport default (loader)=> lazy(() => {\r\n  return new Promise((resolve, reject) => {\r\n    loader.then(AsyncComponent => {\r\n      console.log('加载完毕, 延迟传送');\r\n      setTimeout(() => {\r\n        console.log('传送');\r\n        resolve(AsyncComponent);\r\n      }, 10);\r\n    });\r\n  });\r\n});\r\n","// 配置所有路由\r\nimport React, {Component, Suspense} from \"react\";\r\nimport {\r\n  Redirect,   //路由重定向\r\n  Route,  //定义路由选项,`负责接收对应的路由组件视图,充当路由插槽的作\r\n  Switch  //仅仅只会渲染一个路径,解决route的唯一渲染（仅仅渲染一个路由路径）\r\n} from \"react-router-dom\";\r\nimport AuthRoute from \"./authRoute\";\r\n// import Lazyload from \"./utils/lazyload\"; //react路由懒加载需要依赖第三方模块 `react-loadable`, Lazyload是之前封装好的懒加载效果\r\nimport lazy from \"../utils/lazy\";\r\n//后面写再附上具体代码\r\nexport default class MainLayout extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <Suspense fallback={'loading...'}>\r\n          <Switch>\r\n            <Route path=\"/\" exact render={() => (<Redirect to=\"/guide\"/>)}/>\r\n            <Route path=\"/guide\" component={lazy(import(\"./routing/guide\"))}></Route>\r\n            <Route path=\"/remarks\" component={lazy(import(\"./remarks/index\"))}></Route>\r\n            <Route path=\"/login\" component={lazy(import(\"./login/index\"))}></Route>\r\n            <AuthRoute path=\"/user\" component={lazy(import(\"./routing/user\"))}></AuthRoute>\r\n            <Route path=\"/404\" component={lazy(import(\"./routing/404\"))}></Route>\r\n            <Route render={() => (<Redirect to=\"/404\"/>)}></Route>\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import './App.css';\nimport Remarks from \"./pages/index\";\nimport {\n  HashRouter as Hash, //我这边使用hash路由也就是前端路由\n  Route,  //定义路由选项,`负责接收对应的路由组件视图,充当路由插槽的作\n} from \"react-router-dom\";\n\nimport MainLayout from \"./pages/router\";\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/*<Remarks/>*/}\n        <Hash>\n            <Route path=\"/\" component={MainLayout}></Route>\n        </Hash>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n// 全局引入 bootstrap ，组件中都可以使用bootstrap提供的样式表\nimport 'bootstrap/scss/bootstrap.scss';\nimport {Provider} from 'react-redux'\nimport store from \"./store/index\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}